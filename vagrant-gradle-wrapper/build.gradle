import com.manning.gia.vm.Vagrant

ext.targetedVagrantProjectDir = file('../vagrant-azure')

task vagrantUp(type: Vagrant) {
    commands = ['up']
    dir = targetedVagrantProjectDir	
}

task vagrantReload(type: Vagrant) {
    commands = ['reload']
    dir = targetedVagrantProjectDir
}
vagrantReload.dependsOn vagrantUp

task vagrantSshConfig(type: Vagrant) {
    commands = ['ssh-config']
    dir = targetedVagrantProjectDir
}

task vagrantStatus(type: Vagrant) {
    commands = ['status']
    dir = targetedVagrantProjectDir
}
vagrantStatus.dependsOn vagrantReload

task vagrantProvision(type: Vagrant) {
    commands = ['provision']
    dir = targetedVagrantProjectDir
}


task vagrantSuspend(type: Vagrant) {
    commands = ['suspend']
    dir = targetedVagrantProjectDir
} 

task vagrantResume(type: Vagrant) {
    commands = ['resume']
    dir = targetedVagrantProjectDir
}

task vagrantWindowsTest(type: Vagrant) {
    commands = ['halt']
    dir = targetedVagrantProjectDir
}


task vagrantRdp(type: Vagrant) {
    commands = ['rdp']
    dir = targetedVagrantProjectDir
}

vagrantRdp.dependsOn vagrantStatus

vagrantProvision.dependsOn vagrantRdp

vagrantWindowsTest.dependsOn vagrantProvision

task vagrantDestroy(type: Vagrant){
	commands = ['destroy', '--force']
	dir = targetedVagrantProjectDir
}

task vagrantRsync(type: Vagrant) {
    commands = ['rsync']
    dir = targetedVagrantProjectDir
}
vagrantRsync.dependsOn vagrantUp

task vagrantLinuxTest(type: Vagrant) {
    commands = ['ssh']
    dir = targetedVagrantProjectDir
}
vagrantSshConfig.dependsOn vagrantRsync
vagrantLinuxTest.dependsOn vagrantSshConfig












